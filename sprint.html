<template name="sprint">
  <div class="pull-left">
    <a href="/">&lt; Back</a>
  </div>
  <div style="text-align: center;">
    <h1>{{sprintName}}</h1>
  </div>
  <table class="sprint-table table">
    <thead>
      <th width="10%">Story</th>
      <th width="30%">Not Started</th>
      <th width="30%">In Progress</th>
      <th width="30%">Done</th>
    </thead>
    <tbody>
      {{#each story}}
        {{> story}}
      {{/each}}
      <tr class="add-story-row" >
        <td colspan="4" style="text-align: center;">
          <button type="button" class="btn show-add-story-dialog" data-toggle="modal" data-target="#add-story-dialog" style="visibility: hidden;">Add Story</button>
        </td>
      </tr>
    </tbody>
  </table>
  {{> newStoryDialog}}
  {{> newTaskDialog}}
</template>

<template name="story">
  <tr>
    <td class="story-cell">
      <span class="story-name">{{name}}</span>
      <a class="show-add-task-dialog btn btn-link" data-toggle="modal" data-target="#add-task-dialog" style="visibility: hidden;">+Task</a>
    </td>
    <td>
      <input type="hidden" name="status" value="notstarted">
      <div class="tasks-container">
        {{#each tasks}}
          {{#if taskStatus "notstarted"}}
            {{> task}}
          {{/if}}
        {{/each}}
      </div>
    </td>
    <td>
      <input type="hidden" name="status" value="inprogress">
      <div class="tasks-container">
        {{#each tasks}}
          {{#if taskStatus "inprogress"}}
            {{> task}}
          {{/if}}
        {{/each}}
      </div>
    </td>
    <td>
      <input type="hidden" name="status" value="done">
      <div class="tasks-container">
        {{#each tasks}}
          {{#if taskStatus "done"}}
            {{> task}}
          {{/if}}
        {{/each}}
      </div>
    </td>
  </tr>
</template>

<template name="task">
  <div class="task">
    <input type="hidden" name="taskId" value="{{id}}">
    <div><small>{{name}}</small></div>
    <div style="text-align: center;"><h5>{{description}}</h5></div>
    <div style="text-align: right;"><small>{{owner}}: {{hours}} hrs</small></div>
  </div>
</template>