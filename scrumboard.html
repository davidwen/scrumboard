<head>
  <title>scrumboard</title>
</head>

<body>
  {{> main}}
</body>

<template name="main">
  {{#if sprint}}
    {{> sprint}}
  {{else}}
    {{> dashboard}}
  {{/if}}
</template>

<template name="sprint">
  {{#with sprint}}
    <div class="pull-left" style="width: 300px;">
      <a class="btn" style="margin-left: 20px;" href="/">&lt; All Sprints</a>
    </div>
    <div class="pull-right" style="width: 300px;">
      <ul class="nav nav-pills pull-right" style="margin-right: 20px;">
        <li {{#if sprintView "scrumboard"}}class="active"{{/if}}>
          <a href="#" class="show-scrumboard">Scrumboard</a>
        </li>
        <li {{#if sprintView "table"}}class="active"{{/if}}>
          <a href="#" class="show-table">Table</a>
        </li>
        <li {{#if sprintView "burndown"}}class="active"{{/if}}>
          <a href="#" class="show-burndown">Burndown</a>
        </li>
      </ul>
    </div>
    <div style="text-align: center; margin: 0 auto;">
      <h1>{{name}}</h1>
    </div>
    {{#if sprintView "table"}}
      {{> table}}
    {{else}}
      {{#if sprintView "burndown"}}
        {{> burndown}}
      {{else}}
        {{> scrumboard}}
      {{/if}}
    {{/if}}
  {{/with}}
  {{> newStoryDialog}}
  {{> newTaskDialog}}
  {{> storyDetailsDialog}}
</template>

<template name="dashboard">
  <div style="margin: 0 auto; max-width: 1100px;">
    <div class="pull-right">
      <button type="button" class="btn show-add-sprint-dialog" data-toggle="modal" data-target="#add-sprint-dialog">Add Sprint</button>
    </div>
    <div style="text-align: center; margin: 0 auto; width: 300px;">
      <h1>Sprint Directory</h1>
    </div>
    <table class="table">
      <thead>
        <th width="30%"><h3>Sprint Name</h3></th>
        <th width="70%"><h3>Stories</h3></th>
      </thead>
      <tbody>
        {{#each sprint}}
          {{> dashboardSprint}}
        {{/each}}
      </tbody>
    </table>
    {{> addSprintDialog}}
  </div>
</template>

<template name="dashboardSprint">
  <tr>
    <td><h3><a href="/{{nameUriDecoded}}">{{name}}</a></h3></td>
    <td>
      <ul>
        {{#each stories}}
          <li><span class="lead">{{name}}</span></li>
        {{/each}}
      </ul>
    </td>
  </tr>
</template>